{"is_source_file": true, "format": "bash script", "description": "This is a shell script designed for applying database schema and seed data to a MySQL database. It creates tables with specific schemas if they do not exist, and seeds some initial reference data. The script reads connection details from an external file and executes SQL statements sequentially, ensuring idempotency.", "external_files": ["db_connection.txt"], "external_methods": ["cat", "eval", "echo", "[ -f \"${CONN_FILE}\" ]", "exit", "query_scalar"], "published": [], "classes": [], "methods": [{"name": "run_sql", "description": "Executes a SQL statement using the MySQL command-line interface, handling errors and showing problematic SQL if execution fails."}, {"name": "query_scalar", "description": "Performs a scalar query that returns the first column of the first row from a SQL select statement."}], "calls": ["eval \"${MYSQL_CMD} --protocol=TCP -e \\\"${sql}\\\"\"", "eval \"${MYSQL_CMD} --protocol=TCP -N -s -e \\\"${sql}\\\"\"", "run_sql \"CREATE TABLE IF NOT EXISTS users ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS uploads ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS categories ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS transactions ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS classifications ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS reports ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS reports_summary ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS reports_pnl_snapshots ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS reconciliation_runs ...\"", "run_sql \"CREATE TABLE IF NOT EXISTS reconciliation_results ...\"", "query_scalar \"SELECT id FROM categories WHERE parent_id IS NULL AND name_th='\u0e23\u0e32\u0e22\u0e44\u0e14\u0e49' LIMIT 1;\"", "query_scalar \"SELECT id FROM categories WHERE parent_id IS NULL AND name_th='\u0e15\u0e49\u0e19\u0e17\u0e38\u0e19\u0e02\u0e32\u0e22' LIMIT 1;\"", "query_scalar \"SELECT id FROM categories WHERE parent_id IS NULL AND name_th='\u0e04\u0e48\u0e32\u0e43\u0e0a\u0e49\u0e08\u0e48\u0e32\u0e22' LIMIT 1;\"", "query_scalar \"SELECT id FROM categories WHERE parent_id IS NULL AND name_th='\u0e20\u0e32\u0e29\u0e35\u0e21\u0e39\u0e25\u0e04\u0e48\u0e32\u0e40\u0e1e\u0e34\u0e48\u0e21' LIMIT 1;\""], "search-terms": ["apply_schema_and_seed.sh", "schema creation", "seed data", "MySQL shell script", "idempotent database setup"], "state": 2, "file_id": 8, "knowledge_revision": 26, "git_revision": "feef988ac5c85dfe2f5316b7541c2752133c4e12", "revision_history": [{"18": "129d8f5c4206aa8d551944d239752e4a53b6e45d"}, {"21": "0b96f5bcc9b5005641c8e727af78a0b68f931b79"}, {"22": "0b96f5bcc9b5005641c8e727af78a0b68f931b79"}, {"25": "feef988ac5c85dfe2f5316b7541c2752133c4e12"}, {"26": "feef988ac5c85dfe2f5316b7541c2752133c4e12"}], "hash": "17c2012a7020506b65c67f077e15fbb9", "format-version": 4, "code-base-name": "accountant_database", "filename": "accountant_database/apply_schema_and_seed.sh"}